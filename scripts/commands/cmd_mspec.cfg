// mute/unmute all spectators on server (show's message on server, irc and log)
// useful in clanwars, when the spectators are very annoying
// made by /BudSpencer (2016)

enabled = 1

cmd_mutespec = [
if ( = $enabled 0 ) [
    pm $arg1 (format "^f1>>> ^f4This command is ^f2DISABLED^f4! ^f1<<<")
    ] [
	all = (allplayers)
		looplist cn $all [
			if (isspectator $cn)[
				mute $cn 1[
					say (format "^f1>>> ^f4Player ^f2%1(%2) ^f4has ^f2muted ^f4all spectators^f4. ^f1<<<" (getname $arg1) $arg1)
					ircsay (format "^f1>>> ^f4Player ^f2%1(%2) ^f4has ^f2muted ^f4all spectators^f4. ^f1<<<" (getname $arg1) $arg1)
					log (format ">>> Player %1(%2) has muted all spectators. <<<" (getname $arg1) $arg1) 
					]
			]
	    ]
	]
]

registercommand "mspec" cmd_mutespec 3 "" "mspec ^f2A command to mute all spectators on server."