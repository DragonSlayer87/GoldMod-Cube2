// stop server instantly
// modified by /BudSpencer (2016)

enabled = 1

cmd_stop = [
if ( = $enabled 0 ) [
    pm $arg1 (format "^f1>>> ^f4This command is ^f2DISABLED^f4! ^f1<<<")
    ] [
	if ( =s $arg2 1 ) [
		say (format "^f1>>> ^f4Shutting down ^f2server ^f4... done! ^f1<<<")
		ircsay (format "^f1>>> ^f4Shutting down ^f2server ^f4... done! ^f1<<<")
		log (format "^f1>>> ^f4Shutting down ^f2server ^f4... done! ^f1<<<")
		sleep 50 [ halt 1 ]
	] [
		pm $arg1 "^f1>>> ^f4You wanna ^f2stop ^f4server? Well, just do ^f3#^f4halt 1 and your life is over. ^f1<<<"
        pm $arg2 (format "^f1>>> ^f4The admin player ^f2%1(%2) ^f4wanna ^f2stop ^f4the server ... If he continue you will ^f2disconnect ^f4from this server. ^f1<<<" (getname $arg1) $arg1)
        ircsay (format "^f1>>> ^f4The admin player ^f2%1(%2) ^f4wanna ^f2stop ^f4the server ... If he continue the server will ^f2left ^f4IRC. ^f1<<<" (getname $arg1) $arg1)
		]
    ]
]

registercommand "stop" cmd_stop 3 "|b" "stop (<1>) ^f2A admin command to stop server without restarting."
