// show player stats for specified player
// made by /BudSpencer (2016)

//returns string containing player's statistics
getplayerstatstr = [
	str = (format "^f1>>> ^f2Name: ^f4%1 ^f4| ^f2Country: ^f4%2 ^f4| ^f2Frags(Kills): ^f4%3 ^f4| ^f2Deaths: ^f4%4 ^f4| ^f2Accuracy: ^f4%5%% ^f4| ^f2KpD: ^f4%6% ^f4|" (getname $arg1) (getcountry (getip $arg1)) (getfrags $arg1) (getdeaths $arg1) (getaccuracy $arg1) (getkpd $arg1))	
	curr_mode = (modetostr (getmode))
	// current gamemode is team mode
	if (= (isinlist $TEAMMODES $curr_mode) 1) [
		str = (concatword $str (format " ^f2Teamkills: ^f4%1 ^f4|" (getteamkills $arg1)))
		
		// current gamemode has flags
		if (= (isinlist $FLAGMODES $curr_mode) 1) [
			str = (concatword $str (format " ^f2Scored Flags: ^f4%1 ^f4|" (getflags $arg1) ))
			// str = (concatword $str (format " ^f7Returned flags: %1" (getretflags $arg1)))  // not implemented yet
		]
	]
	str = (concatword $str (format " ^f2Rank: ^f4%1^f7 ^f4|" (getrank $arg1))) 
	str = (concatword $str (format " ^f2Time: ^f4%1^f7 ^f1<<<" (formatmillis "%hh %mm %ss" (getonline $arg1))))
	result $str
]

cmd_playerstats = [
if ( = $arg1 $arg2 ) [
		pm $arg1 (format "^f1>>> ^f4Current Game Stats for ^f2Yourself^f4: ^f3<<<")
		pm $arg1 (getplayerstatstr $arg1)
		] [
		pm $arg1 (format "^f1>>> ^f4Current Game Stats for ^f2%1(%2)^f4: ^f3<<<" (getname $arg2) $arg2)
		pm $arg1 (getplayerstatstr $arg2)
		]		
]

registercommand "pstats" cmd_playerstats 1 "c" "pstats <cn> ^f2That command shows game statistics for a specified player."
