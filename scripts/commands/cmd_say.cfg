// say a public message to server
// made by /BudSpencer (2016)

//variables
enabled = 1

pname = (getname $arg1)
pcn = (getcn $arg1)
text = $arg2


cmd_say = [
pname = (getname $arg1)
pcn = (getcn $arg1)
text = $arg2
	if ( = $enabled 0 ) [
		pm $arg1 (format "^f1>>> ^f4This command is ^f2DISABLED^f4! ^f1<<<")
		] [
		if ( ismuted $arg1 ) [
		pm $arg1 (format "^f1>>> ^f4You can't run this ^f2command^f4, when your ^f2muted^f4. Get ^f2unmuted ^f4you and try again. ^f1<<<")
		] [
		say (format "^f1>>> ^f4(^f2%1(%2)^f4)^f4: ^f4%3 ^f1<<<" $pname $pcn $text)
		ircsay (format "^f1>>> ^f4Message ^f2(^f2%1(%2))^f4: ^f2%3 ^f1<<<" $pname $pcn $text)
		log (format ">>> Message (%1(%2)): %3 <<<" $pname $pcn $text)
			]
		] 
] 

registercommand "say" cmd_say 1 "s" "say <message> ^f2This command says a public message. (Visible for all players on server and in IRC)."