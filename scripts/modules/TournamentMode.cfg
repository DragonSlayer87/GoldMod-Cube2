// Tournament Main Command + routines
// made by /BudSpencer ( 2016 )



defaultvalue "enable_tournament_system" 1


// default values
chk_tournament = 0
clan_list = ""
tournament_poss = 0

Test_Server = [

if ( = $enable_tournament_system 0 ) [

pm $arg1 ( format "^f7The ^f3tournament ^f7module is ^f4diabled ^f7on that server^f7." )
chk_tournament = 0

] [

if ( = $chk_tournament 1 ) [

runner_name = ( getname $arg1 )
runner_cn = ( getcn $arg1 )

pm $arg1 ( format "^f3%1^f7, a ^f4tournament is already running. Turn on your ^f4brain^f7, if you have one^f7." $runner_name )
chk_tournament = 0

] [

	if ( > ( * ( tournamentplayers ) 2 ) ( numclients ) ) [
	
		pm $arg1 ( format "^f7A useful ^f3tournament ^f7can only start, if at least ^f4%1 ^f7players of ^f42 ^f7clans are connected." ( * ( tournamentplayers ) 2 ) )
		chk_tournament = 0
		
	] [
	
	tournament_poss = 1
	chk_tournament = 1
	
			]
			
		]
		
	]
	
]

tb_countplayers = [
	tb_count = 0
	tb_cnlist = (listclients)
	looplist tb_cn $tb_cnlist [
		if ( >= ( strstr ( getname $tb_cn ) "test." ) 0 ) [ tb_count = (+ $tb_count 1) ]
	]

	result $tb_count
	pm $arg1 ( format "here are %1 players of your clan connected" $tb_count )
]
addhandler "onconnect" tb_countplayers







	
	
	
	
	
	
	