// server maprotation ( maps can be automatically chosen from here)

dm_maplist = ""
capture_maplist = ""
flag_maplist = ""
// race_maplist = "Vibesrace awesome-race-2"

// mode list
dm_modelist = "0 2 3 4 5 6 7 8" // ffa insta eff, team
flag_modelist = "11 12 13 14 17 18"
capture_modelist = "9 10"
hold_modelist = "15 16 19"
// race_modelist = "1 12 4"

nextmap = [	
	mode_ = (getmode)
	map_ = ""
	currmap = (getmap)
	maplist = ""

	if (isinlist $dm_modelist $mode_) [ maplist = $dm_maplist] 
	if (isinlist $flag_modelist $mode_) [ maplist = $flag_maplist] 
	if (isinlist $capture_modelist $mode_) [ maplist = $capture_maplist] 
	if (isinlist $hold_modelist $mode_) [ maplist = $capture_maplist] 
	// if (isinlist $race_modelist $mode_) [ maplist = $race_maplist] 


	// choose next map
	orderlen = (- (listlen $maplist) 1) // order len to index
	mapindex = (indexof $maplist $currmap)

	// map in list and not last
	if (&& (!= $mapindex -1) (< $mapindex $orderlen)) [ 
		map_ = (at $maplist (+ $mapindex 1))
	] [
		map_ = (at $maplist 0)
	]

	if (=s $map_ "") [ $map_ = $currmap ]
	result $map_
]


// sends and gets unknown map
// added by /BudSpencer (2016)

enable_script = 1

send_get_map = [
if ( = $enable_script 1 ) [

map_choose = ( getmap )

loadmap $map_choose 
getmap $map_choose

	]
]

addhandler onmapstart send_get_map