// sends a message to players with an weird name ( send warning to irc and log )
// made by /BudSpencer (2016)


enable_name_msg_system_core = 1
enable_kicking_player_with_ass_name = 1
enable_serv_msg = 1
enable_irc_msg = 1
enable_log_msg = 1

kick_millis = 20000
kick_time = 900000

player_name = ( getname $arg1 )
player_cn = ( getcn $arg1 )


system_name_core = [
if ( = $enable_name_msg_system_core 1 ) [
player_name_disabled = (getvalue $arg2 (at $DISABLED-NAMES (getname $arg1)))
player_name = ( getname $arg1 )	
player_cn = ( getcn $arg1 )
if (= (isinlist $DISABLED-NAMES $player_name ) 1) [
if ( = $enable_kicking_player_with_ass_name 1 ) [
kick_millis = 20000
kick_time = 900000

kick_millis_sec = ( div $kick_millis 1000 )

pm $arg1 (format "^f1>>> ^f4You use a ^f2disallowed ^f4name and have ^f2%1 seconds ^f4to ^f2disconnect ^f4and ^f2reconnect ^f4with other name ^f1<<<" $kick_millis_sec )
sleep $kick_millis [ kick $arg1 $kick_time ] // kicks player for 1/4 hour
] [
if ( = $enable_serv_msg 1 ) [
pm $arg1 (format "^f1>>> ^f4You use a ^f2offensive name (%1)^f4. Change name to another one, please. ^f1<<<" $player_name )
]
if ( = $enable_irc_msg 1 ) [
ircsay (format "^f1>>> ^f4Player ^f2%1(%2) ^f4use a ^f2offensive name (%3)^f4. ^f1<<<" $player_name $player_cn $player_name )
]
if ( = $enable_log_msg 1 ) [
log (format ">>> Player %1(%2) use a offensive name (%3). <<<" $player_name $player_cn $player_name )
				]
			]
		] 
	]
]

addhandler onconnect system_name_core
addhandler onswitchname system_name_core
